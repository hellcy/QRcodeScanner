@model Scanner.Models.CoilDetail
@{

    ViewBag.Title = "Scanner Page";
    Layout = "~/Views/Shared/_Layout.cshtml";

}

@section Scripts {
    <script src="http://code.jquery.com/jquery-1.10.2.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#clear').click(function () {
                $('#data').find("tr:gt(0)").remove();
            });

            $('#uploadButton').click(function () {
                $('#uploadFlag').val("UPLOAD");
                uploadForm();
            });

            function uploadForm() {
                setTimeout(function () {
                    $("#uploadForm").submit();
                }, 0);
            }

            function displayForm() {
                setTimeout(function () {
                    $("#displayForm").submit();
                }, 5000);
            }

            $('#ID').on('paste input', function () {
                displayForm();
            });

            $(window).keydown(function (event) {
                if (event.keyCode == 13) {
                    event.preventDefault();
                    return false;
                }
            });

            $("#ID").val(""); 
            $("#ID").focus();
            $('#uploadFlag').val("");
        });
    </script>
}

<!DOCTYPE html>
<html>
<body style="font-size:20px;">
    <div class="col-md-6">
        <form id="displayForm" action="Index" method="post">
            <div class="editor-label">
                CoilID Scanned
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.CoilDetails[0].ID, new { id = "ID" })
            </div>
        </form>
        <input type="submit" id="clear" value="clear table" />
        <input type="submit" id="uploadButton" value="upload" />
    </div>
    <div class="col-md-6">
        <div style="width:300px; text-align:center;">
            <img src="C:\Scanner\frame.png" alt="QRcode for upload data" height="300" width="300" />
            Upload Data
        </div>

        <form id="uploadForm" action="Index" method="post">
            <div class="editor-field">
                @Html.TextBoxFor(model => model.CoilDetails[0].ID, new { id = "upload", type="hidden" })
                @Html.TextBoxFor(model => model.CoilDetails[0].Flag, new { id = "uploadFlag", type="hidden" })
            </div>
        </form>
    </div>
    <div class="col-md-12">
        <div style="color:red; font-size:40px">@ViewBag.Error @ViewBag.Upload</div>
        <table id="data" class="table table-condensed table-hover">
            <tr>
                <th>
                    ID
                </th>
                <th>
                    Type
                </th>
                <th>
                    Color
                </th>
                <th>
                    Weight
                </th>
                <th>
                    Gauge
                </th>
                <th>
                    Width
                </th>
                <th>
                    Order
                </th>
                <th>
                    P_order
                </th>
                <th>
                    Month_recd
                </th>
                <th>
                    Date_inwh
                </th>
                <th>
                    Date_transfer
                </th>
                <th>
                    Last_stocktake_date
                </th>
                <th>
                    Status
                </th>
                <th>
                    Clength
                </th>
            </tr>
            @{
                if (Model != null && Model.CoilDetails[0].ID != "")
                {
                    foreach (var item in Model.CoilDetails.ToList())
                    {
                        <tr>
                            <td>
                                @item.ID
                            </td>
                            <td>
                                @item.Type
                            </td>
                            <td>
                                @item.Color
                            </td>
                            <td>
                                @item.Weight
                            </td>
                            <td>
                                @item.Gauge
                            </td>
                            <td>
                                @item.Width
                            </td>
                            <td>
                                @item.Order
                            </td>
                            <td>
                                @item.P_order
                            </td>
                            <td>
                                @item.Month_recd
                            </td>
                            <td>
                                @item.Date_inwh
                            </td>
                            <td>
                                @item.Date_transfer
                            </td>
                            <td>
                                @item.Last_stocktake_date
                            </td>
                            <td>
                                @item.Status
                            </td>
                            <td>
                                @item.Clength
                            </td>
                        </tr>
                    }
                }
            }
        </table>
    </div>
</body>
</html>
